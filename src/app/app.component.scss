$prefix: fb- !default;

@font-face {
  font-display: block;
  font-family: "bootstrap-icons";
  src: url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/fonts/bootstrap-icons.woff2?dd67030699838ea613ee6dbda90effa6")
      format("woff2"),
    url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/fonts/bootstrap-icons.woff?dd67030699838ea613ee6dbda90effa6")
      format("woff");
}

$zindex-modal-backdrop: 10000002 !important;
$zindex-modal: 10000004 !important;

$line-height-base: 1.5 !default;
$line-height-sm: 1.25 !default;
$line-height-lg: 2 !default;

$font-family-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans",
  "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji" !default;
$font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
  monospace !default;

$font-family-base: var(--#{$prefix}font-sans-serif) !default;
$font-weight-normal: 400 !default;
$font-weight-base: $font-weight-normal !default;
$font-size-base: 1rem !default; // Assumes the browser default, typically `16px`
$paragraph-margin-bottom: 1rem !default;

:root {
  --#{$prefix}body-bg: #fff;
  --#{$prefix}body-color: #212529;
  --#{$prefix}border-radius: 0.375rem;
  --#{$prefix}border-radius-lg: 0.5rem;
  --#{$prefix}border-width: 1px;
  --#{$prefix}border-color: #dee2e6;

  // Fonts
  --#{$prefix}body-font-family: #{$font-family-base};
  --#{$prefix}body-font-weight: #{$font-weight-base};
  --#{$prefix}body-line-height: #{$line-height-base};
  // Note: Use `inspect` for lists so that quoted items keep the quotes.
  // See https://github.com/sass/sass/issues/2383#issuecomment-336349172
  --#{$prefix}font-sans-serif: #{inspect($font-family-sans-serif)};
  --#{$prefix}font-monospace: #{inspect($font-family-monospace)};
}

// scss-docs-start headings-variables
$headings-margin-bottom: 1rem * 0.5 !default;
$headings-font-family: null !default;
$headings-font-style: null !default;
$headings-font-weight: 500 !default;
$headings-line-height: 1.2 !default;
$headings-color: inherit !default;

$h1-font-size: $font-size-base * 2.5 !default;
$h2-font-size: $font-size-base * 2 !default;
$h3-font-size: $font-size-base * 1.75 !default;
$h4-font-size: $font-size-base * 1.5 !default;
$h5-font-size: $font-size-base * 1.25 !default;
$h6-font-size: $font-size-base !default;

// Modals

// scss-docs-start modal-variables
$modal-inner-padding: 1rem !default;

$modal-footer-margin-between: 0.5rem !default;

$modal-dialog-margin: 0.5rem !default;
$modal-dialog-margin-y-sm-up: 1.75rem !default;

$modal-title-line-height: $line-height-base !default;

$modal-content-color: null !default;
$modal-content-bg: var(--#{$prefix}body-bg) !default;
$modal-content-border-color: var(--#{$prefix}border-color) !default;
$modal-content-border-width: var(--#{$prefix}border-width) !default;
$modal-content-border-radius: var(--#{$prefix}border-radius-lg) !default;
$modal-content-inner-border-radius: subtract(
  $modal-content-border-radius,
  $modal-content-border-width
) !default;
$modal-content-box-shadow-xs: var(--#{$prefix}box-shadow-sm) !default;
$modal-content-box-shadow-sm-up: var(--#{$prefix}box-shadow) !default;

$modal-backdrop-bg: #000 !default;
$modal-backdrop-opacity: 0.5 !default;

$modal-header-border-color: var(--#{$prefix}border-color) !default;
$modal-header-border-width: $modal-content-border-width !default;
$modal-header-padding-y: $modal-inner-padding !default;
$modal-header-padding-x: $modal-inner-padding !default;
$modal-header-padding: $modal-header-padding-y $modal-header-padding-x !default; // Keep this for backwards compatibility

$modal-footer-bg: null !default;
$modal-footer-border-color: $modal-header-border-color !default;
$modal-footer-border-width: $modal-header-border-width !default;

$modal-sm: 300px !default;
$modal-md: 500px !default;
$modal-lg: 800px !default;
$modal-xl: 1140px !default;

$modal-fade-transform: none !default;
$modal-show-transform: none !default;
$modal-transition: transform 0s ease-out !default;
$modal-scale-transform: scale(1.02) !default;

.modal {
  position: fixed;
}

.modal.modal-form-builder {
  // scss-docs-start modal-css-vars
  --#{$prefix}modal-zindex: #{$zindex-modal};
  --#{$prefix}modal-width: #{$modal-md};
  --#{$prefix}modal-padding: #{$modal-inner-padding};
  --#{$prefix}modal-margin: #{$modal-dialog-margin};
  --#{$prefix}modal-color: #{$modal-content-color};
  --#{$prefix}modal-bg: #{$modal-content-bg};
  --#{$prefix}modal-border-color: #{$modal-content-border-color};
  --#{$prefix}modal-border-width: #{$modal-content-border-width};
  --#{$prefix}modal-border-radius: #{$modal-content-border-radius};
  --#{$prefix}modal-box-shadow: #{$modal-content-box-shadow-xs};
  --#{$prefix}modal-inner-border-radius: #{$modal-content-inner-border-radius};
  --#{$prefix}modal-header-padding-x: #{$modal-header-padding-x};
  --#{$prefix}modal-header-padding-y: #{$modal-header-padding-y};
  --#{$prefix}modal-header-padding: #{$modal-header-padding}; // Todo in v6: Split this padding into x and y
  --#{$prefix}modal-header-border-color: #{$modal-header-border-color};
  --#{$prefix}modal-header-border-width: #{$modal-header-border-width};
  --#{$prefix}modal-title-line-height: #{$modal-title-line-height};
  --#{$prefix}modal-footer-gap: #{$modal-footer-margin-between};
  --#{$prefix}modal-footer-bg: #{$modal-footer-bg};
  --#{$prefix}modal-footer-border-color: #{$modal-footer-border-color};
  --#{$prefix}modal-footer-border-width: #{$modal-footer-border-width};
  // scss-docs-end modal-css-vars

  position: fixed;
  top: 0;
  left: 0;
  z-index: var(--#{$prefix}modal-zindex);
  display: none;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  outline: 0;

  &.fade {
    .modal-dialog {
      transition: $modal-transition;
      transform: $modal-fade-transform;
    }
  }

  &.show {
    .modal-dialog {
      transform: $modal-show-transform;
    }
  }

  &.in {
    .modal-dialog {
      transform: $modal-show-transform;
    }
  }

  &.modal-static {
    .modal-dialog {
      transform: $modal-scale-transform;
    }
  }
}

.modal-dialog-form-builder {
  display: flex;
  align-items: center;
  min-height: calc(100% - var(--#{$prefix}modal-margin) * 2);
  max-width: none;
  width: 700px;

  &.modal-dialog-form-builder--sm {
    width: 400px;
  }

  // Shell div to position the modal with bottom padding
  &.modal-dialog {
    position: relative;
    // width: auto;
    //margin: var(--#{$prefix}modal-margin);
    // allow clicks to pass through for custom click handling to close modal
    pointer-events: none;

    // When fading in the modal, animate it to slide down
    .modal.fade & {
      transition: $modal-transition;
      transform: $modal-fade-transform;
    }
    .modal.show & {
      transform: $modal-show-transform;
    }

    .modal.in & {
      transform: $modal-show-transform;
    }

    // When trying to close, animate focus to scale
    .modal.modal-static & {
      transform: $modal-scale-transform;
    }
  }

  &.modal-dialog-scrollable {
    height: calc(100% - var(--#{$prefix}modal-margin) * 2);

    .modal-content {
      max-height: 100%;
      overflow: hidden;
    }

    .modal-body {
      overflow-y: auto;
    }
  }
  h2 {
    white-space: nowrap;
  }

  .modal-content {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%; // Ensure `.modal-content` extends the full width of the parent `.modal-dialog`
    // counteract the pointer-events: none; in the .modal-dialog
    color: var(--#{$prefix}modal-color);
    pointer-events: auto;
    background-color: var(--#{$prefix}modal-bg);
    background-clip: padding-box;
    border: var(--#{$prefix}modal-border-width) solid var(--#{$prefix}modal-border-color);
    border-radius: var(--#{$prefix}modal-border-radius);
    box-shadow: var(--#{$prefix}modal-box-shadow);
    // Remove focus outline from opened modal
    outline: 0;
  }

  .modal-header {
    display: flex;
    flex-shrink: 0;
    align-items: center;
    padding: var(--#{$prefix}modal-header-padding);
    border-bottom: var(--#{$prefix}modal-header-border-width) solid
      var(--#{$prefix}modal-header-border-color);
    border-top-left-radius: var(--#{$prefix}modal-inner-border-radius);
    border-top-right-radius: var(--#{$prefix}modal-inner-border-radius);
  }

  .modal-content {
    padding: 20px;

    h2 {
      text-align: center;
    }
  }
}

$grid-breakpoints: (
  xs: 0,
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px,
  xxl: 1400px
) !default;

@function breakpoint-min($name, $breakpoints: $grid-breakpoints) {
  $min: map-get($breakpoints, $name);
  @return if($min != 0, $min, null);
}

@mixin media-breakpoint-up($name, $breakpoints: $grid-breakpoints) {
  $min: breakpoint-min($name, $breakpoints);
  @if $min {
    @media (min-width: $min) {
      @content;
    }
  } @else {
    @content;
  }
}

@mixin media-breakpoint-down($name, $breakpoints: $grid-breakpoints) {
  $max: breakpoint-max($name, $breakpoints);
  @if $max {
    @media (max-width: $max) {
      @content;
    }
  } @else {
    @content;
  }
}

// Scale up the modal
@include media-breakpoint-up(sm) {
  .modal {
    --#{$prefix}modal-margin: #{$modal-dialog-margin-y-sm-up};
    --#{$prefix}modal-box-shadow: #{$modal-content-box-shadow-sm-up};
  }

  // Automatically set modal's width for larger viewports
  .modal-dialog-form-builder.modal-dialog {
    margin-right: auto;
    margin-left: auto;
  }

  .modal-sm {
    --#{$prefix}modal-width: #{$modal-sm};
  }
}

@include media-breakpoint-up(lg) {
  .modal-lg,
  .modal-xl {
    --#{$prefix}modal-width: #{$modal-lg};
  }
}

@include media-breakpoint-up(xl) {
  .modal-xl {
    --#{$prefix}modal-width: #{$modal-xl};
  }
}

@function breakpoint-infix($name, $breakpoints: $grid-breakpoints) {
  @return if(breakpoint-min($name, $breakpoints) == null, "", "-#{$name}");
}

@function breakpoint-max($name, $breakpoints: $grid-breakpoints) {
  $max: map-get($breakpoints, $name);
  @return if($max and $max > 0, $max - 0.02, null);
}

// scss-docs-start modal-fullscreen-loop
@each $breakpoint in map-keys($grid-breakpoints) {
  $infix: breakpoint-infix($breakpoint, $grid-breakpoints);
  $postfix: if($infix != "", $infix + "-down", "");

  @include media-breakpoint-down($breakpoint) {
    .modal-fullscreen#{$postfix} {
      width: 100vw;
      max-width: none;
      height: 100%;
      margin: 0;

      .modal-content {
        height: 100%;
        border: 0;
        border-radius: 0;
      }

      .modal-header,
      .modal-footer {
        border-radius: 0;
      }

      .modal-body {
        overflow-y: auto;
      }
    }
  }
}

input.ng-invalid.ng-touched {
  border: red 1px solid;
  box-shadow: 0 0 0 0.1rem rgba(255, 76, 76, 0.966);
}
