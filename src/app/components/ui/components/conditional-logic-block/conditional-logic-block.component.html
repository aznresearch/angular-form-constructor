<div class="conditional-logic-block">
  <div class="conditional-logic-block__label">
    <span>Conditional Logic</span>
  </div>
  <div class="conditional-logic-block__toolbar">
    <span
      class="conditional-logic-block__toolbar-icon"
      data-tooltip="Delete"
      (click)="removeConditionalLogicBlock()"
      ><i class="bi bi-trash"></i
    ></span>
  </div>
  <div class="conditional-logic-block__row">
    <div class="conditional-logic-block__field-group">
      <div>
        <div class="conditional-logic-block__row-label"><span>IF</span></div>
      </div>
      <div>
        <select
          id="fieldSelect"
          [(ngModel)]="block.selectedField"
          class="form-select"
          [compareWith]="compareFields">
          <option *ngFor="let field of addedFields" [ngValue]="field">
            {{ field.title || "Untitled " + fieldLabels[field.type] + " Field" }}
          </option>
        </select>
      </div>
      <div>
        <select id="conditionSelect" [(ngModel)]="block.selectedCondition" class="form-select">
          <ng-container *ngIf="block.selectedField">
            <option
              *ngFor="let option of conditionOptions[block.selectedField.type]"
              [value]="option">
              {{ option }}
            </option>
          </ng-container>
        </select>
      </div>
      <div>
        <input
          type="text"
          id="conditionInput"
          [(ngModel)]="block.conditionValue"
          class="form-control"
          *ngIf="isConditionInputVisible()" />
      </div>
    </div>
  </div>

  <div class="conditional-logic-block__row">
    <div class="conditional-logic-block__field-group conditional-logic-block__field-group--actions">
      <div>
        <div class="conditional-logic-block__row-label"><span>DO</span></div>
      </div>

      <div>
        <select id="actionSelect" [(ngModel)]="block.selectedAction" class="form-select">
          <option value="show">Show Block</option>
          <option value="hide">Hide Block</option>
        </select>
      </div>
      <div>
        <select id="targetFieldSelect" [(ngModel)]="block.selectedTargetField" class="form-select">
          <option *ngFor="let field of addedFields" [value]="field.id">
            {{ field.title || "Untitled " + fieldLabels[field.type] + " Field" }}
          </option>
        </select>
      </div>
    </div>
  </div>
</div>
